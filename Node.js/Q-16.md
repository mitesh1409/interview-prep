# What is npm? What is the purpose of package.json, package-lock.json files & node_modules folder?

**npm**  

npm, Inc. is a company founded in 2014, and was acquired by GitHub in 2020. npm is a critical part of the JavaScript community and helps support one of the largest developer ecosystems in the world.

npm is lots of things.

npm is the package manager for Node.js. It was created in 2009 as an open source project to help JavaScript developers easily share packaged modules of code.

The npm Registry is a public collection of packages of open-source code for Node.js, front-end web apps, mobile apps, robots, routers, and countless other needs of the JavaScript community.

npm is the command line client that allows developers to install and publish those packages.

---

**package.json**  

When we run `npm init` command to initialize Node.js application as an npm package.
It will create `package.json` file that contains all the necessary project information (project metadata).

For example,

- name (name of the application/package)
- version (version of the application/package)
- description (short description about the application/package)
- main (main entry point)
- type (module or commonjs)
- scripts (scripts for different tasks)
- author
- license
- dependencies, devDependencies 
etc.

---

**package-lock.json**  

package-lock.json will be created when we run any one of the following commands:  
`npm install` - install dependencies
`npm uninstall` - uninstall dependencies
`npm update` - update dependencies

package-lock.json contains information about what all the dependencies are installed in our application
with their exact version.

Check the following example:

```JSON
  "dependencies": {
    ...
    "axios": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.3.3.tgz",
      "integrity": "sha512-eYq77dYIFS77AQlhzEL937yUBSepBfPIe8FcgEDN35vMNZKMrs81pgnyrQpwfy4NF4b4XWX1Zgx7yX+25w8QJA==",
      "requires": {
        "follow-redirects": "^1.15.0",
        "form-data": "^4.0.0",
        "proxy-from-env": "^1.1.0"
      }
    },
    ...
```

version  
The exact version installed.

resolved  
The location from where the dependency is resolved/coming.

integrity  
It confirms that the installed package is not corrupted.

requires  
What are the dependencies of it.

> By using package-lock.json we ensure that the same version of dependencies will be
> installed whenever a project is setup again on the same or different system/machine.

---

**node_modules**  

node_modules folder is at the root of our package/application.
It contains all the 3rd party packages that we have installed using npm CLI tool.

When we install any package using npm CLI tool, it gets downloaded from the npm registry
and then it is saved into the node_modules folder.

Now Node.js will load the dependencies from the node_modules folder.

**Never ever modify the code inside node_modules**  

Its a bad idea to modify the code of the packages that are into node_modules folder.
The 3rd party packages should be managed (install, update or remove) by npm CLI tool only.

**node_modules contains all the dependencies**  

node_modules folder contains direct as well as indirect dependencies of our application.
In other words node_modules contains direct dependencies and also contains dependencies
of those dependencies (also called transitive dependencies).

npm downloads and puts all the dependencies side by side into the node_modules folder.
It does not create any nested folder structure.

For example,
When we install "axios" package, its dependency "follow-redirects" is also installed.
npm puts "axios" and "follow-redirects" side by side into the node_modules folder.

So it looks like:
node_modules
    axios
    follow-redirects

Our application dependencies create a dependency tree.

**Heaviest object in the Universe meme**  

![Heaviest object in the Universe](images/heaviest-object-in-the-universe.png "Heaviest object in the Universe")

This comes from the early days of Node.js when the dependencies were duplicated,
and we would have to do things like remove node_modules folder if things became
corrupt during an install, which would happen fairely often.

But now npm has improved exponentially, especially in the past few years.

**node_modules must be inside .gitignore**  

We don't need to share application dependencies when we share our code.
Application dependencies can be installed from scratch using `npm install`
command using the information provided in the package.json & package-lock.json files.
So we put node_modules inside .gitignore file.
